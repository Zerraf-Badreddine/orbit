# Learn Backend

A modern backend API built with Bun, Hono, Better Auth, and Drizzle ORM.

## Features

- **Authentication**: Email/password authentication with Better Auth
- **Email Verification**: Automated email verification flow
- **Password Reset**: Secure password reset functionality
- **Session Management**: Database-backed sessions with cookie caching
- **Rate Limiting**: Built-in rate limiting for production
- **Type Safety**: Full TypeScript support with Zod validation
- **Database**: PostgreSQL with Drizzle ORM

## Project Structure

```
backend/
├── src/
│   ├── api/              # API routes and handlers
│   │   └── auth/         # Authentication routes
│   ├── config/           # Configuration files
│   │   ├── env.config.ts       # Environment variables with validation
│   │   └── auth.config.ts      # Better Auth configuration
│   ├── database/         # Database setup and schemas
│   │   ├── repositories/ # Data access layer
│   │   └── schemas/      # Drizzle schemas
│   ├── lib/              # Third-party service integrations
│   │   └── email/        # Email service with templates
│   ├── middleware/       # Custom middleware
│   │   └── error-handler.middleware.ts
│   ├── types/            # TypeScript type definitions
│   ├── utils/            # Utility functions
│   │   └── response.util.ts
│   └── index.ts          # Application entry point
├── .env                  # Environment variables
├── .env.example          # Example environment variables
├── drizzle.config.ts     # Drizzle configuration
├── package.json
├── tsconfig.json
└── README.md
```

## Getting Started

### Prerequisites

- [Bun](https://bun.sh) installed
- PostgreSQL database

### Installation

1. Install dependencies:
```sh
bun install
```

2. Copy the example environment file:
```sh
cp .env.example .env
```

3. Update `.env` with your configuration:
```env
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
AUTH_SECRET_KEY=your-secret-key-minimum-32-characters-long
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
```

4. Generate and push database schema:
```sh
bun run db:generate
bun run db:push
```

### Development

Run the development server with hot reload:
```sh
bun run dev
```

The API will be available at `http://localhost:3000`

### Database Commands

- `bun run db:generate` - Generate migrations from schema
- `bun run db:migrate` - Run migrations
- `bun run db:push` - Push schema changes directly to database
- `bun run db:studio` - Open Drizzle Studio for database management

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `NODE_ENV` | Environment mode | `development` |
| `DATABASE_URL` | PostgreSQL connection string | Required |
| `APP_NAME` | Application name | `Learn Backend` |
| `API_BASE_URL` | API base URL | `http://localhost:3000` |
| `FRONTEND_URL` | Frontend URL for CORS | `http://localhost:5173` |
| `AUTH_SECRET_KEY` | Secret key for auth (min 32 chars) | Required |
| `SMTP_HOST` | SMTP server host | `smtp.gmail.com` |
| `SMTP_PORT` | SMTP server port | `587` |
| `SMTP_USER` | SMTP username/email | Required |
| `SMTP_PASS` | SMTP password/app password | Required |

## API Endpoints

### Health Check
- `GET /` - API health check

### Authentication
All auth endpoints are under `/api/auth/*`:
- `POST /api/auth/sign-up` - Register new user
- `POST /api/auth/sign-in` - Sign in user
- `POST /api/auth/sign-out` - Sign out user
- `POST /api/auth/verify-email` - Verify email
- `POST /api/auth/forgot-password` - Request password reset
- `POST /api/auth/reset-password` - Reset password

For complete Better Auth API documentation, visit: https://www.better-auth.com/docs

## Tech Stack

- **Runtime**: [Bun](https://bun.sh)
- **Framework**: [Hono](https://hono.dev)
- **Authentication**: [Better Auth](https://www.better-auth.com)
- **Database**: PostgreSQL
- **ORM**: [Drizzle](https://orm.drizzle.team)
- **Validation**: [Zod](https://zod.dev)
- **Email**: [Nodemailer](https://nodemailer.com)
